(function($){Drupal.admin=Drupal.admin||{};Drupal.admin.behaviors=Drupal.admin.behaviors||{};Drupal.admin.hashes=Drupal.admin.hashes||{};Drupal.behaviors.adminMenu={attach:function(context,settings){settings.admin_menu=$.extend({suppress:false,margin_top:false,position_fixed:false,tweak_modules:false,tweak_permissions:false,tweak_tabs:false,destination:"",basePath:settings.basePath,hash:0,replacements:{}},settings.admin_menu||{});if(settings.admin_menu.suppress)return;var $adminMenu=$("#admin-menu:not(.admin-menu-processed)",
context);if(!$adminMenu.length&&settings.admin_menu.hash)Drupal.admin.getCache(settings.admin_menu.hash,function(response){if(typeof response=="string"&&response.length>0)$("body",context).append(response);var $adminMenu=$("#admin-menu:not(.admin-menu-processed)",context);Drupal.admin.attachBehaviors(context,settings,$adminMenu);$(window).triggerHandler("resize")});else Drupal.admin.attachBehaviors(context,settings,$adminMenu)}};Drupal.behaviors.adminMenuCollapseModules={attach:function(context,settings){if(settings.admin_menu.tweak_modules)$("#system-modules fieldset:not(.collapsed)",
context).addClass("collapsed")}};Drupal.behaviors.adminMenuCollapsePermissions={attach:function(context,settings){if(settings.admin_menu.tweak_permissions){$("#permissions th:first",context).css({width:$("#permissions th:first",context).width()});$modules=$("#permissions tr:has(td.module)",context).once("admin-menu-tweak-permissions",function(){var $module=$(this);$module.bind("click.admin-menu",function(){$module.nextAll().each(function(){var $row=$(this);if($row.is(":has(td.module)"))return false;
$row.toggleClass("element-hidden")})})});if(window.location.hash.length)$modules=$modules.not(":has("+window.location.hash+")");$modules.trigger("click.admin-menu")}}};Drupal.behaviors.adminMenuMarginTop={attach:function(context,settings){if(!settings.admin_menu.suppress&&settings.admin_menu.margin_top)$("body:not(.admin-menu)",context).addClass("admin-menu")}};Drupal.admin.getCache=function(hash,onSuccess){if(Drupal.admin.hashes.hash!==undefined)return Drupal.admin.hashes.hash;$.ajax({cache:true,
type:"GET",dataType:"text",global:false,url:Drupal.settings.admin_menu.basePath.replace(/admin_menu/,"js/admin_menu/cache/"+hash),success:onSuccess,complete:function(XMLHttpRequest,status){Drupal.admin.hashes.hash=status}})};Drupal.admin.height=function(){var $adminMenu=$("#admin-menu");var height=$adminMenu.outerHeight();if($adminMenu.css("filter")&&$adminMenu.css("filter").match(/DXImageTransform\.Microsoft\.Shadow/))height-=$adminMenu.get(0).filters.item("DXImageTransform.Microsoft.Shadow").strength;
return height};Drupal.admin.attachBehaviors=function(context,settings,$adminMenu){if($adminMenu.length){$adminMenu.addClass("admin-menu-processed");$.each(Drupal.admin.behaviors,function(){this(context,settings,$adminMenu)})}};Drupal.admin.behaviors.positionFixed=function(context,settings,$adminMenu){if(settings.admin_menu.position_fixed){$adminMenu.addClass("admin-menu-position-fixed");$adminMenu.css("position","fixed")}};Drupal.admin.behaviors.pageTabs=function(context,settings,$adminMenu){if(settings.admin_menu.tweak_tabs){var $tabs=
$(context).find("ul.tabs.primary");$adminMenu.find("#admin-menu-wrapper > ul").eq(1).append($tabs.find("li").addClass("admin-menu-tab"));$(context).find("ul.tabs.secondary").appendTo("#admin-menu-wrapper > ul > li.admin-menu-tab.active").removeClass("secondary");$tabs.remove()}};Drupal.admin.behaviors.replacements=function(context,settings,$adminMenu){for(var item in settings.admin_menu.replacements)$(item,$adminMenu).html(settings.admin_menu.replacements[item])};Drupal.admin.behaviors.destination=
function(context,settings,$adminMenu){if(settings.admin_menu.destination)$("a.admin-menu-destination",$adminMenu).each(function(){this.search+=(!this.search.length?"?":"&")+Drupal.settings.admin_menu.destination})};Drupal.admin.behaviors.hover=function(context,settings,$adminMenu){if($.browser.msie&&parseInt(jQuery.browser.version)==6)$("li",$adminMenu).hover(function(){$(this).addClass("iehover")},function(){$(this).removeClass("iehover")});$("li.expandable",$adminMenu).hover(function(){clearTimeout(this.sfTimer);
$("> ul",this).css({left:"auto",display:"block"}).parent().siblings("li").children("ul").css({left:"-999em",display:"none"})},function(){var uls=$("> ul",this);this.sfTimer=setTimeout(function(){uls.css({left:"-999em",display:"none"})},400)})};Drupal.admin.behaviors.search=function(context,settings,$adminMenu){var $input=$("input.admin-menu-search",$adminMenu);var needle=$input.val();var links;var needleMinLength=2;var $results=$("<div />").insertAfter($input);function keyupHandler(){var matches,
$html,value=$(this).val();if(value!==needle){needle=value;if(!links&&needle.length>=needleMinLength)links=buildSearchIndex($adminMenu.find("li:not(.admin-menu-action, .admin-menu-action li) > a"));if(needle.length<needleMinLength)$results.empty();if(needle.length>=needleMinLength&&links){matches=findMatches(needle,links);$html=buildResultsList(matches);$results.empty().append($html)}}}function buildSearchIndex($links){return $links.map(function(){var text=this.textContent||this.innerText;if(typeof text===
"undefined")return;return{text:text,textMatch:text.toLowerCase(),element:this}})}function findMatches(needle,links){var needleMatch=needle.toLowerCase();return $.grep(links,function(link){return link.textMatch.indexOf(needleMatch)!==-1})}function buildResultsList(matches){var $html=$('<ul class="dropdown admin-menu-search-results" />');$.each(matches,function(){var result=this.text;var $element=$(this.element);var $category=$element.closest("#admin-menu-wrapper > ul > li");var categoryText=$category.find("> a").text();
if($category.length&&categoryText)result=categoryText+": "+result;var $result=$('<li><a href="'+$element.attr("href")+'">'+result+"</a></li>");$result.data("original-link",$(this.element).parent());$html.append($result)});return $html}function resultsHandler(e){var $this=$(this);var show=e.type==="mouseenter"||e.type==="focusin";$this.trigger(show?"showPath":"hidePath",[this])}function resultsClickHandler(e,link){var $original=$(this).data("original-link");$original.trigger("mouseleave");$input.val("").trigger("keyup")}
function highlightPathHandler(e,link){if(link){var $original=$(link).data("original-link");var show=e.type==="showPath";$original.toggleClass("highlight",show);$original.trigger(show?"mouseenter":"mouseleave")}}$results.delegate("li","mouseenter mouseleave focus blur",resultsHandler);$results.delegate("li","click",resultsClickHandler);$adminMenu.delegate(".admin-menu-search-results li","showPath hidePath",highlightPathHandler);$input.bind("keyup search",keyupHandler)}})(jQuery);;/**/
(function($){Drupal.admin=Drupal.admin||{};Drupal.admin.behaviors=Drupal.admin.behaviors||{};Drupal.admin.behaviors.toolbarActiveTrail=function(context,settings,$adminMenu){if(settings.admin_menu.toolbar&&settings.admin_menu.toolbar.activeTrail)$adminMenu.find('> div > ul > li > a[href="'+settings.admin_menu.toolbar.activeTrail+'"]').addClass("active-trail")};Drupal.admin.behaviors.shortcutToggle=function(context,settings,$adminMenu){var $shortcuts=$adminMenu.find(".shortcut-toolbar");if(!$shortcuts.length)return;
var storage=window.localStorage||false;var storageKey="Drupal.admin_menu.shortcut";var $body=$(context).find("body");var $toggle=$adminMenu.find(".shortcut-toggle");$toggle.click(function(){var enable=!$shortcuts.hasClass("active");$shortcuts.toggleClass("active",enable);$toggle.toggleClass("active",enable);if(settings.admin_menu.margin_top)$body.toggleClass("admin-menu-with-shortcuts",enable);storage&&enable?storage.setItem(storageKey,1):storage.removeItem(storageKey);this.blur();return false});
if(!storage||storage.getItem(storageKey))$toggle.trigger("click")}})(jQuery);;/**/
(function($){Drupal.behaviors.devel={attach:function(context,settings){$(".krumo-footnote .krumo-call").once().before('<img style="vertical-align: middle;" title="Click to expand. Double-click to show path." src="'+settings.basePath+'misc/help.png"/>');var krumo_name=[];var krumo_type=[];function krumo_traverse(el){krumo_name.push($(el).html());krumo_type.push($(el).siblings("em").html().match(/\w*/)[0]);if($(el).closest(".krumo-nest").length>0)krumo_traverse($(el).closest(".krumo-nest").prev().find(".krumo-name"))}
$(".krumo-child > div:first-child",context).dblclick(function(e){if($(this).find("> .krumo-php-path").length>0)$(this).find("> .krumo-php-path").remove();else{krumo_traverse($(this).find("> a.krumo-name"));var krumo_path_string="";for(var i=krumo_name.length-1;i>=0;--i){if(krumo_name.length-1==i)krumo_path_string+="$"+krumo_name[i];if(typeof krumo_name[i-1]!=="undefined"){if(krumo_type[i]=="Array"){krumo_path_string+="[";if(!/^\d*$/.test(krumo_name[i-1]))krumo_path_string+="'";krumo_path_string+=
krumo_name[i-1];if(!/^\d*$/.test(krumo_name[i-1]))krumo_path_string+="'";krumo_path_string+="]"}if(krumo_type[i]=="Object")krumo_path_string+="->"+krumo_name[i-1]}}$(this).append('<div class="krumo-php-path" style="font-family: Courier, monospace; font-weight: bold;">'+krumo_path_string+"</div>");krumo_name=[];krumo_type=[]}})}}})(jQuery);;/**/
(function($){Drupal.Views={};Drupal.behaviors.viewsTabs={attach:function(context){if($.viewsUi&&$.viewsUi.tabs)$("#views-tabset").once("views-processed").viewsTabs({selectedClass:"active"});$("a.views-remove-link").once("views-processed").click(function(event){var id=$(this).attr("id").replace("views-remove-link-","");$("#views-row-"+id).hide();$("#views-removed-"+id).attr("checked",true);event.preventDefault()});$("a.display-remove-link").addClass("display-processed").click(function(){var id=$(this).attr("id").replace("display-remove-link-",
"");$("#display-row-"+id).hide();$("#display-removed-"+id).attr("checked",true);return false})}};Drupal.Views.parseQueryString=function(query){var args={};var pos=query.indexOf("?");if(pos!=-1)query=query.substring(pos+1);var pairs=query.split("&");for(var i in pairs)if(typeof pairs[i]=="string"){var pair=pairs[i].split("=");if(pair[0]!="q"&&pair[1])args[decodeURIComponent(pair[0].replace(/\+/g," "))]=decodeURIComponent(pair[1].replace(/\+/g," "))}return args};Drupal.Views.parseViewArgs=function(href,
viewPath){var returnObj={};var path=Drupal.Views.getPath(href);if(viewPath&&path.substring(0,viewPath.length+1)==viewPath+"/"){var args=decodeURIComponent(path.substring(viewPath.length+1,path.length));returnObj.view_args=args;returnObj.view_path=path}return returnObj};Drupal.Views.pathPortion=function(href){var protocol=window.location.protocol;if(href.substring(0,protocol.length)==protocol)href=href.substring(href.indexOf("/",protocol.length+2));return href};Drupal.Views.getPath=function(href){href=
Drupal.Views.pathPortion(href);href=href.substring(Drupal.settings.basePath.length,href.length);if(href.substring(0,3)=="?q=")href=href.substring(3,href.length);var chars=["#","?","&"];for(i in chars)if(href.indexOf(chars[i])>-1)href=href.substr(0,href.indexOf(chars[i]));return href}})(jQuery);;/**/
(function($){Drupal.progressBar=function(id,updateCallback,method,errorCallback){var pb=this;this.id=id;this.method=method||"GET";this.updateCallback=updateCallback;this.errorCallback=errorCallback;this.element=$('<div class="progress" aria-live="polite"></div>').attr("id",id);this.element.html('<div class="bar"><div class="filled"></div></div>'+'<div class="percentage"></div>'+'<div class="message">&nbsp;</div>')};Drupal.progressBar.prototype.setProgress=function(percentage,message){if(percentage>=
0&&percentage<=100){$("div.filled",this.element).css("width",percentage+"%");$("div.percentage",this.element).html(percentage+"%")}$("div.message",this.element).html(message);if(this.updateCallback)this.updateCallback(percentage,message,this)};Drupal.progressBar.prototype.startMonitoring=function(uri,delay){this.delay=delay;this.uri=uri;this.sendPing()};Drupal.progressBar.prototype.stopMonitoring=function(){clearTimeout(this.timer);this.uri=null};Drupal.progressBar.prototype.sendPing=function(){if(this.timer)clearTimeout(this.timer);
if(this.uri){var pb=this;$.ajax({type:this.method,url:this.uri,data:"",dataType:"json",success:function(progress){if(progress.status==0){pb.displayError(progress.data);return}pb.setProgress(progress.percentage,progress.message);pb.timer=setTimeout(function(){pb.sendPing()},pb.delay)},error:function(xmlhttp){pb.displayError(Drupal.ajaxError(xmlhttp,pb.uri))}})}};Drupal.progressBar.prototype.displayError=function(string){var error=$('<div class="messages error"></div>').html(string);$(this.element).before(error).hide();
if(this.errorCallback)this.errorCallback(this)}})(jQuery);;/**/
(function($){Drupal.behaviors.ViewsAjaxView={};Drupal.behaviors.ViewsAjaxView.attach=function(){if(Drupal.settings&&Drupal.settings.views&&Drupal.settings.views.ajaxViews)$.each(Drupal.settings.views.ajaxViews,function(i,settings){Drupal.views.instances[i]=new Drupal.views.ajaxView(settings)})};Drupal.views={};Drupal.views.instances={};Drupal.views.ajaxView=function(settings){var selector=".view-dom-id-"+settings.view_dom_id;this.$view=$(selector);var ajax_path=Drupal.settings.views.ajax_path;if(ajax_path.constructor.toString().indexOf("Array")!=
-1)ajax_path=ajax_path[0];var queryString=window.location.search||"";if(queryString!==""){var queryString=queryString.slice(1).replace(/q=[^&]+&?|&?render=[^&]+/,"");if(queryString!=="")queryString=(/\?/.test(ajax_path)?"&":"?")+queryString}this.element_settings={url:ajax_path+queryString,submit:settings,setClick:true,event:"click",selector:selector,progress:{type:"throbber"}};this.settings=settings;this.$exposed_form=$("form#views-exposed-form-"+settings.view_name.replace(/_/g,"-")+"-"+settings.view_display_id.replace(/_/g,
"-"));this.$exposed_form.once(jQuery.proxy(this.attachExposedFormAjax,this));this.$view.filter(jQuery.proxy(this.filterNestedViews,this)).once(jQuery.proxy(this.attachPagerAjax,this));var self_settings=this.element_settings;self_settings.event="RefreshView";this.refreshViewAjax=new Drupal.ajax(this.selector,this.$view,self_settings)};Drupal.views.ajaxView.prototype.attachExposedFormAjax=function(){var button=$("input[type=submit], button[type=submit], input[type=image]",this.$exposed_form);button=
button[0];this.exposedFormAjax=new Drupal.ajax($(button).attr("id"),button,this.element_settings)};Drupal.views.ajaxView.prototype.filterNestedViews=function(){return!this.$view.parents(".view").size()};Drupal.views.ajaxView.prototype.attachPagerAjax=function(){this.$view.find("ul.pager > li > a, th.views-field a, .attachment .views-summary a").each(jQuery.proxy(this.attachPagerLinkAjax,this))};Drupal.views.ajaxView.prototype.attachPagerLinkAjax=function(id,link){var $link=$(link);var viewData={};
var href=$link.attr("href");$.extend(viewData,this.settings,Drupal.Views.parseQueryString(href),Drupal.Views.parseViewArgs(href,this.settings.view_base_path));$.extend(viewData,Drupal.Views.parseViewArgs(href,this.settings.view_base_path));this.element_settings.submit=viewData;this.pagerAjax=new Drupal.ajax(false,$link,this.element_settings)};Drupal.ajax.prototype.commands.viewsScrollTop=function(ajax,response,status){var offset=$(response.selector).offset();var scrollTarget=response.selector;while($(scrollTarget).scrollTop()==
0&&$(scrollTarget).parent())scrollTarget=$(scrollTarget).parent();if(offset.top-10<$(scrollTarget).scrollTop())$(scrollTarget).animate({scrollTop:offset.top-10},500)}})(jQuery);;/**/
(function($){Drupal.googleanalytics={};$(document).ready(function(){$(document.body).bind("mousedown keyup touchstart",function(event){$(event.target).closest("a,area").each(function(){if(Drupal.googleanalytics.isInternal(this.href))if($(this).is(".colorbox"));else if(Drupal.settings.googleanalytics.trackDownload&&Drupal.googleanalytics.isDownload(this.href))ga("send","event","Downloads",Drupal.googleanalytics.getDownloadExtension(this.href).toUpperCase(),Drupal.googleanalytics.getPageUrl(this.href));
else{if(Drupal.googleanalytics.isInternalSpecial(this.href))ga("send","pageview",{page:Drupal.googleanalytics.getPageUrl(this.href)})}else if(Drupal.settings.googleanalytics.trackMailto&&$(this).is("a[href^='mailto:'],area[href^='mailto:']"))ga("send","event","Mails","Click",this.href.substring(7));else if(Drupal.settings.googleanalytics.trackOutbound&&this.href.match(/^\w+:\/\//i))if(Drupal.settings.googleanalytics.trackDomainMode!=2&&!Drupal.googleanalytics.isCrossDomain(this.hostname,Drupal.settings.googleanalytics.trackCrossDomains))ga("send",
"event","Outbound links","Click",this.href)})});if(Drupal.settings.googleanalytics.trackUrlFragments)window.onhashchange=function(){ga("send","pageview",location.pathname+location.search+location.hash)};$(document).bind("cbox_complete",function(){var href=$.colorbox.element().attr("href");if(href)ga("send","pageview",{page:Drupal.googleanalytics.getPageUrl(href)})})});Drupal.googleanalytics.isCrossDomain=function(hostname,crossDomains){if(!crossDomains)return false;else return $.inArray(hostname,
crossDomains)>-1?true:false};Drupal.googleanalytics.isDownload=function(url){var isDownload=new RegExp("\\.("+Drupal.settings.googleanalytics.trackDownloadExtensions+")([?#].*)?$","i");return isDownload.test(url)};Drupal.googleanalytics.isInternal=function(url){var isInternal=new RegExp("^(https?)://"+window.location.host,"i");return isInternal.test(url)};Drupal.googleanalytics.isInternalSpecial=function(url){var isInternalSpecial=new RegExp("(/go/.*)$","i");return isInternalSpecial.test(url)};Drupal.googleanalytics.getPageUrl=
function(url){var extractInternalUrl=new RegExp("^(https?)://"+window.location.host,"i");return url.replace(extractInternalUrl,"")};Drupal.googleanalytics.getDownloadExtension=function(url){var extractDownloadextension=new RegExp("\\.("+Drupal.settings.googleanalytics.trackDownloadExtensions+")([?#].*)?$","i");var extension=extractDownloadextension.exec(url);return extension===null?"":extension[1]}})(jQuery);;/**/
