/* Source and licensing information for the line(s) below can be found at http://www.tapanalytics.com/sites/all/modules/tabvn/layer_slider/js/admin.js. */
(function($){$.fn.customCheckbox=function(){return this.each(function(){var el=this;$(this).hide();var rep=$('<a href="#"><span></span></a>').addClass('ls-checkbox').insertAfter(this);if($(this).is(':checked')){$(rep).addClass('on')}else $(rep).addClass('off');$(rep).click(function(e){e.preventDefault();if($(el).is(':checked')){$(el).prop('checked',false);$(rep).removeClass('on').addClass('off')}else{$(el).prop('checked',true);$(rep).removeClass('off').addClass('on')}})})}})(jQuery);(function($){$(document).ready(function(){var drupal_base_path=Drupal.settings.basePath,LayerSlider={uploadInput:null,dragContainer:null,dragIndex:0,newIndex:0,timeout:0,counter:0,selectMainTab:function(el){jQuery('#ls-main-nav-bar a').removeClass('active');jQuery(el).addClass('active');jQuery('#ls-pages .ls-page').removeClass('active');jQuery('#ls-pages .ls-page').eq(jQuery(el).index()).addClass('active')},addLayer:function(){var clone=jQuery('#ls-sample > div').clone();clone.appendTo('#ls-layers');jQuery('#ls-layer-tabs a').removeClass('active');var index=clone.index();jQuery('#ls-layers .ls-layer-box').eq(index).find('input[name="background"]').attr('id','upload-background-img-'+index);var tab=jQuery('<a href="#">Layer #'+(index+1)+'<span class="ls-icon-layer-remove">x</span></a>').insertBefore('#ls-add-layer');tab.click();LayerSlider.addSortables();LayerSlider.generatePreview(index)},removeLayer:function(el){if(confirm('Are you sure you want to remove this layer?')){var item=jQuery(el).parent(),layer=jQuery(el).closest('#ls-layer-tabs').next().children().eq(item.index());if(layer.next().length>0){item.next().click()}else if(layer.prev().length>0)item.prev().click();item.remove();layer.remove();LayerSlider.reindexLayers()}},selectLayer:function(el){jQuery('#ls-layer-tabs a').removeClass('active');jQuery('#ls-layers .ls-layer-box').removeClass('active');jQuery(el).addClass('active');jQuery('#ls-layers .ls-layer-box').eq(jQuery(el).index()).addClass('active');jQuery('#ls-layers .ls-layer-box').eq(jQuery(el).index()).find('.ls-sublayers td:first').click();LayerSlider.generatePreview(jQuery(el).index());LayerSlider.stop()},duplicateLayer:function(el){LayerSlider.cloneFix();var index=jQuery(el).closest('.ls-layer-box').index();jQuery('<a href="#">Layer #0<span>x</span></a>').insertBefore('#ls-layer-tabs a:last');LayerSlider.reindexLayers();var clone=jQuery(el).closest('.ls-layer-box').clone();clone.appendTo('#ls-layers');clone.removeClass('active');LayerSlider.addSortables()},addSublayer:function(el){var clone=jQuery('#ls-sample .ls-sublayers > tr').clone();clone.appendTo(jQuery(el).prev().find('.ls-sublayers'));var index=clone.index();clone.find('.ls-sublayer-number').html(index+1);clone.find('.ls-sublayer-title').val('Sublayer #'+(index+1));clone.click()},selectSubLayer:function(el){if(jQuery(el).index()==jQuery(el).parent().children('.active:first').index())return;jQuery(el).parent().children().removeClass('active');jQuery(el).addClass('active')},selectSublayerPage:function(el){jQuery(el).parent().children().removeClass('active');jQuery(el).parent().next().find('.ls-sublayer-page').removeClass('active');jQuery(el).addClass('active');jQuery(el).parent().next().find('.ls-sublayer-page').eq(jQuery(el).index()).addClass('active')},removeSublayer:function(el){if(!confirm('Are you sure you want to remove this sublayer?'))return;var sublayer=jQuery(el).closest('tr'),layer=jQuery(el).closest('.ls-layer-box');if(sublayer.next().length>0){sublayer.next().click()}else if(sublayer.prev().length>0)sublayer.prev().click();jQuery(el).remove();sublayer.remove();LayerSlider.generatePreview(layer.index())},highlightSublayer:function(el){if(jQuery(el).prop('checked')==true){jQuery('.ls-highlight input').not(el).prop('checked',false);jQuery(el).closest('.ls-layer-box').find('.draggable').children().css({opacity:0.5});var index=jQuery(el).closest('tr').index();jQuery(el).closest('.ls-layer-box').find('.draggable').children().eq(index).css({zIndex:1e3,opacity:1})}else jQuery(el).closest('.ls-layer-box').find('.draggable').children().each(function(index){jQuery(this).css({zIndex:10+index});jQuery(this).css('opacity',1)})},duplicateSublayer:function(el){LayerSlider.cloneFix();var clone=jQuery(el).closest('.ls-sublayer-wrapper').closest('tr').clone();clone.removeClass('active');clone.appendTo(jQuery(el).closest('.ls-sublayers'));clone.find('.ls-sublayer-title').val(clone.find('.ls-sublayer-title').val()+' copy');LayerSlider.reindexSublayers(jQuery(el).closest('.ls-layer-box'));LayerSlider.generatePreview(jQuery(el).closest('.ls-layer-box').index())},skipSublayer:function(el){LayerSlider.generatePreview(jQuery(el).closest('.ls-layer-box').index())},selectMediaType:function(el){jQuery(el).parent().children().removeClass('active');jQuery(el).addClass('active');jQuery(el).closest('.ls-sublayer-basic').find('select option').attr('selected',false);var option=jQuery(el).closest('.ls-sublayer-basic').find('select option').eq(jQuery(el).index()).attr('selected',true);if(option.val()=='img'){jQuery(el).closest('.ls-sublayer-basic').find('.ls-image-uploader').show();jQuery(el).closest('.ls-sublayer-basic').find('.ls-html-code').hide()}else{jQuery(el).closest('.ls-sublayer-basic').find('.ls-image-uploader').hide();jQuery(el).closest('.ls-sublayer-basic').find('.ls-html-code').show()}},didSelectMediaType:function(el){LayerSlider.selectMediaType(el);LayerSlider.generatePreview(jQuery(el).closest('.ls-layer-box').index())},setCallbackBoxesWidth:function(){jQuery('.ls-callback-box').width((jQuery('.wrap').width()-26)/3)},willGeneratePreview:function(index){clearTimeout(LayerSlider.timeout);LayerSlider.timeout=setTimeout(function(){if(index==-1){jQuery('#ls-layers .ls-layer-box').each(function(index){LayerSlider.generatePreview(index)})}else LayerSlider.generatePreview(index)},1e3)},generatePreview:function(index){var preview=jQuery('.ls-preview').eq(index+1),draggable=preview.find('.draggable'),width=jQuery('.ls-settings input[name="width"]').val(),height=jQuery('.ls-settings input[name="height"]').val(),sub_container=jQuery('.ls-settings input[name="sublayercontainer"]').val();if(sub_container!=''&&sub_container!=0)width=sub_container;preview.add(draggable).css({width:width,height:height});preview.parent().css({width:width});var bgColor=jQuery('.ls-settings input[name="backgroundcolor"]').val(),bgImage=jQuery('.ls-settings input[name="backgroundimage"]').val();if(bgColor!=''){preview.css({backgroundColor:bgColor})}else preview.css({backgroundColor:'transparent'});if(bgImage!=''){preview.css({backgroundImage:'url('+bgImage+')'})}else preview.css({backgroundImage:'none'});var yourLogo=jQuery('.ls-settings input[name="yourlogo"]').val(),yourLogoStyle=jQuery('.ls-settings input[name="yourlogostyle"]').val();preview.parent().find('.yourlogo').remove();if(yourLogo&&yourLogo!=''){var logo=jQuery('<img src="'+yourLogo+'" class="yourlogo">').prependTo(jQuery(preview).parent());logo.attr('style',yourLogoStyle);var oL=oR=oT=oB='auto';if(logo.css('left')!='auto')var logoLeft=logo[0].style.left;if(logo.css('right')!='auto')var logoRight=logo[0].style.right;if(logo.css('top')!='auto')var logoTop=logo[0].style.top;if(logo.css('bottom')!='auto')var logoBottom=logo[0].style.bottom;if(logoLeft&&logoLeft.indexOf('%')!=-1){oL=width/100*parseInt(logoLeft)-logo.width()/2}else oL=parseInt(logoLeft);if(logoRight&&logoRight.indexOf('%')!=-1){oR=width/100*parseInt(logoRight)-logo.width()/2}else oR=parseInt(logoRight);if(logoTop&&logoTop.indexOf('%')!=-1){oT=height/100*parseInt(logoTop)-logo.height()/2}else oT=parseInt(logoTop);if(logoBottom&&logoBottom.indexOf('%')!=-1){oB=height/100*parseInt(logoBottom)-logo.height()/2}else oB=parseInt(logoBottom);logo.css({left:oL,right:oR,top:oT,bottom:oB})};var background=jQuery('#ls-layers .ls-layer-box').eq(index).find('input[name="background"]').val();if(background!=''){draggable.css({backgroundImage:'url('+background+')',backgroundPosition:'center center'})}else draggable.css({backgroundImage:'none'});draggable.children().remove();jQuery('#ls-layers .ls-layer-box').eq(index).find('.ls-sublayers > tr').each(function(){var type=jQuery(this).find('select[name="type"] option:selected').val(),url=jQuery(this).find('input[name="image"]').val(),skip=jQuery(this).find('input[name="skip"]').prop('checked'),wordWrap=jQuery(this).find('input[name="wordwrap"]').prop('checked');if(skip){jQuery('<div>').appendTo(draggable);return true}else if(type=='img'){if(url!=''){var item=jQuery('<img src="'+url+'">').appendTo(draggable)}else var item=jQuery('<div>').appendTo(draggable)}else{var html=jQuery(this).find('textarea[name="html"]').val(),item=jQuery('<'+type+'>').appendTo(draggable);if(html!='')item.html(html)};item.css('position','absolute');var top=jQuery(this).find('input[name="top"]').val(),left=jQuery(this).find('input[name="left"]').val(),custom=jQuery(this).find('textarea[name="style"]').val();item.attr('style',custom);if(wordWrap==false)item.css('white-space','nowrap');var pt=isNaN(parseInt(item.css('padding-top')))?0:parseInt(item.css('padding-top')),pl=isNaN(parseInt(item.css('padding-left')))?0:parseInt(item.css('padding-left')),bt=isNaN(parseInt(item.css('border-top-width')))?0:parseInt(item.css('border-top-width')),bl=isNaN(parseInt(item.css('border-left-width')))?0:parseInt(item.css('border-left-width')),setPositions=function(){if(top.indexOf('%')!=-1){item.css({top:draggable.height()/100*parseInt(top)-item.height()/2-pt-bt})}else item.css({top:parseInt(top)});if(left.indexOf('%')!=-1){item.css({left:draggable.width()/100*parseInt(left)-item.width()/2-pl-bl})}else item.css({left:parseInt(left)})};if(item.is('img')){item.load(function(){setPositions()}).attr('src',item.attr('src'))}else setPositions();item.css({zIndex:10+item.index()});LayerSlider.addDraggable()})},openMediaLibrary:function(){jQuery('.ls-upload').live('click',function(){uploadInput=this;myItem=$(this);if(myItem.attr('name')=='image'){$('.ls-sublayer-pages .ls-sublayer-page').each(function(index){tmp_ls=$(this);tmp_ls.find('.ls-upload').attr('id','ls-upload-img'+index)});window.open(drupal_base_path+'?q=imce&app=LayerSlider|url@'+myItem.attr('id'),'','width=760,height=560,resizable=1')}else window.open(drupal_base_path+'?q=imce&app=LayerSlider|url@'+myItem.attr('id'),'','width=760,height=560,resizable=1');return false})},insertUpload:function(){window.send_to_editor=function(html){var img=jQuery('img',html).attr('src');jQuery(uploadInput).val(img);tb_remove();jQuery('#ls-layers .ls-layer-box').each(function(index){LayerSlider.generatePreview(index)});if(jQuery(uploadInput).is('input[name="image"]'))jQuery(uploadInput).prev().attr('src',img)}},addSortables:function(){jQuery('.ls-sublayer-sortable').sortable({axis:'y',helper:function(e,tr){var $originals=tr.children(),$helper=tr.clone();$helper.children().each(function(index){jQuery(this).width($originals.eq(index).width())});return $helper},sort:function(event,ui){LayerSlider.dragContainer=jQuery('.ui-sortable-helper').closest('.ls-layer-box')},stop:function(event,ui){LayerSlider.generatePreview(LayerSlider.dragContainer.index());LayerSlider.reindexSublayers(LayerSlider.dragContainer)},containment:'parent',tolerance:'pointer'})},addLayerSortables:function(){jQuery('#ls-layer-tabs').sortable({start:function(){LayerSlider.dragIndex=jQuery('.ui-sortable-placeholder').index()-1},change:function(){jQuery('.ui-sortable-helper').addClass('moving')},stop:function(event,ui){var oldIndex=LayerSlider.dragIndex,index=jQuery('.moving').index();if(index>-1)if(index==0){jQuery('#ls-layers .ls-layer-box').eq(oldIndex).prependTo('#ls-layers')}else{var layerObj=jQuery('#ls-layers .ls-layer-box').eq(oldIndex);jQuery('#ls-layers .ls-layer-box').eq(oldIndex).remove();layerObj.insertAfter('#ls-layers .ls-layer-box:eq('+(index-1)+')')};jQuery('.moving').removeClass('moving');LayerSlider.reindexLayers()},containment:'parent',tolerance:'pointer',items:'a:not(.unsortable)'})},addDraggable:function(){jQuery('.draggable').children().draggable({drag:function(){LayerSlider.dragging()},stop:function(){LayerSlider.dragging()}})},dragging:function(){var top=jQuery('.ui-draggable-dragging').position().top,left=jQuery('.ui-draggable-dragging').position().left,wrapper=jQuery('.ui-draggable-dragging').closest('.ls-layer-box'),index=jQuery('.ui-draggable-dragging').index();wrapper.find('input[name="top"]').eq(index).val(top+'px');wrapper.find('input[name="left"]').eq(index).val(left+'px')},selectDragElement:function(el){jQuery(el).closest('.ls-layer-box').find('.ls-sublayers > tr').eq(jQuery(el).index()).click();jQuery(el).closest('.ls-layer-box').find('.ls-sublayers > tr').eq(jQuery(el).index()).find('.ls-sublayer-nav a:eq(1)').click()},reindexSublayers:function(el){jQuery(el).find('.ls-sublayers > tr').each(function(index){jQuery(this).find('.ls-sublayer-number').html(index+1);if(jQuery(this).find('.ls-sublayer-title').val().indexOf('Sublayer')!=-1&&jQuery(this).find('.ls-sublayer-title').val().indexOf('copy')==-1)jQuery(this).find('.ls-sublayer-title').val('Sublayer #'+(index+1))})},reindexLayers:function(){jQuery('#ls-layer-tabs a:not(.unsortable)').each(function(index){jQuery(this).html('Layer #'+(index+1)+'<span>x</span>')})},play:function(index){var layerslider=jQuery('#ls-layers .ls-layer-box').eq(index).find('.ls-real-time-preview');if(layerslider.children().length>0){jQuery('#ls-layers .ls-layer-box').eq(index).find('.ls-preview').show();layerslider.find('.ls-container').layerSlider('stop');layerslider.html('').hide();jQuery('#ls-layers .ls-layer-box').eq(index).find('.ls-preview-button').html('Enter Preview').removeClass('playing');return};layerslider.show();layerslider=jQuery('<div class="layerslider">').appendTo(layerslider);jQuery('#ls-layers .ls-layer-box').eq(index).find('.ls-preview').hide();jQuery('#ls-layers .ls-layer-box').eq(index).find('.ls-preview-button').html('Exit Preview').addClass('playing');var width=jQuery('.ls-settings input[name="width"]').val(),height=jQuery('.ls-settings input[name="height"]').val(),backgroundColor=jQuery('.ls-settings input[name="backgroundcolor"]').val(),backgroundImage=jQuery('.ls-settings input[name="backgroundimage"]').val();layerslider.css({width:width,height:height});if(backgroundColor!='')layerslider.css({backgroundColor:backgroundColor});if(backgroundImage!='')layerslider.css({backgroundImage:'url('+backgroundImage+')'});jQuery('#ls-layers .ls-layer-box').each(function(){var background=jQuery(this).find('input[name="background"]').val(),direction=jQuery(this).find('select[name="slidedirection"]:first option:selected').val(),delay=jQuery(this).find('input[name="slidedelay"]').val(),durationIn=jQuery(this).find('input[name="durationin"]').val(),easingIn=jQuery(this).find('select[name="easingin"] option:selected').val(),delayIn=jQuery(this).find('input[name="delayin"]').val(),durationOut=jQuery(this).find('input[name="durationout"]').val(),easingOut=jQuery(this).find('select[name="easingout"] option:selected').val(),delayOut=jQuery(this).find('input[name="delayout"]').val(),layer=jQuery('<div class="ls-layer">').appendTo(layerslider);layer.attr('rel','slidedirection:'+direction+';');layer.attr('rel',layer.attr('rel')+'slidedelay:'+delay+';');layer.attr('rel',layer.attr('rel')+'durationin:'+durationIn+';');layer.attr('rel',layer.attr('rel')+'durationout:'+durationOut+';');layer.attr('rel',layer.attr('rel')+'easingin:'+easingIn+';');layer.attr('rel',layer.attr('rel')+'easingout:'+easingOut+';');layer.attr('rel',layer.attr('rel')+'delayin:'+delayIn+';');layer.attr('rel',layer.attr('rel')+'delayout:'+delayOut+';');if(background!='')jQuery('<img src="'+background+'" class="ls-bg">').appendTo(layer);jQuery(this).find('.ls-sublayers > tr').each(function(index){var type=jQuery(this).find('select[name="type"] option:selected').val(),image=jQuery(this).find('input[name="image"]').val(),html=jQuery(this).find('textarea[name="html"]').val(),style=jQuery(this).find('textarea[name="style"]').val(),top=jQuery(this).find('input[name="top"]').val(),left=jQuery(this).find('input[name="left"]').val(),level=jQuery(this).find('input[name="level"]').val(),skip=jQuery(this).find('input[name="skip"]').prop('checked'),url=jQuery(this).find('input[name="url"]').val(),directionIn=jQuery(this).find('select[name="slidedirection"] option:selected').val(),directionOut=jQuery(this).find('select[name="slideoutdirection"] option:selected').val(),durationIn=jQuery(this).find('input[name="durationin"]').val(),durationOut=jQuery(this).find('input[name="durationout"]').val(),easingIn=jQuery(this).find('select[name="easingin"] option:selected').val(),easingOut=jQuery(this).find('select[name="easingout"] option:selected').val(),delayIn=jQuery(this).find('input[name="delayin"]').val(),delayOut=jQuery(this).find('input[name="delayout"]').val(),showUntil=jQuery(this).find('input[name="showuntil"]').val(),wordWrap=jQuery(this).find('input[name="wordwrap"]').prop('checked');if(skip)return true;if(type=='img'){if(image!=''){var sublayer=jQuery('<img src="'+image+'">').appendTo(layer).addClass('ls-s'+level)}else return true}else var sublayer=jQuery('<'+type+'>').appendTo(layer).html(html).addClass('ls-s'+level);sublayer.attr('style',style);if(wordWrap==false)sublayer.css('white-space','nowrap');if(top.indexOf('%')!=-1){sublayer.css({top:top,marginTop:-sublayer.height()/2-parseInt(sublayer.css('padding-top'))-parseInt(sublayer.css('border-top-width'))})}else sublayer.css({top:parseInt(top)});if(left.indexOf('%')!=-1){sublayer.css({left:left,marginLeft:-sublayer.width()/2-parseInt(sublayer.css('padding-left'))-parseInt(sublayer.css('border-left-width'))})}else sublayer.css({left:parseInt(left)});if(url!=''&&url.match(/^\#[0-9]/))sublayer.addClass('ls-linkto-'+url.substr(1));sublayer.attr('rel','');if(directionIn!='auto')sublayer.attr('rel',sublayer.attr('rel')+'slidedirection:'+directionIn+';');if(directionOut!='auto')sublayer.attr('rel',sublayer.attr('rel')+'slideoutdirection:'+directionOut+';');sublayer.attr('rel',sublayer.attr('rel')+'durationin:'+durationIn+';');sublayer.attr('rel',sublayer.attr('rel')+'durationout:'+durationOut+';');sublayer.attr('rel',sublayer.attr('rel')+'easingin:'+easingIn+';');sublayer.attr('rel',sublayer.attr('rel')+'easingout:'+easingOut+';');sublayer.attr('rel',sublayer.attr('rel')+'delayin:'+delayIn+';');sublayer.attr('rel',sublayer.attr('rel')+'delayout:'+delayOut+';');sublayer.attr('rel',sublayer.attr('rel')+'showuntil:'+showUntil+';')})});var skinPath=pluginPath+'skins/';jQuery(layerslider).layerSlider({width:width,height:height,skin:'preview',skinsPath:skinPath,animateFirstLayer:true,firstLayer:(index+1),autoStart:true,pauseOnHover:false})},stop:function(){var layersliders=jQuery('#ls-layers .ls-layer-box .ls-real-time-preview');if(layersliders.children().length>0){jQuery('#ls-layers .ls-layer-box .ls-preview').show();layersliders.find('.ls-container').layerSlider('stop');layersliders.html('').hide();jQuery('#ls-layers .ls-layer-box .ls-preview-button').text('Enter Preview').removeClass('playing')}},save:function(el){jQuery('.ls-publish button').text('Saving ...').addClass('saving').attr('disabled',true);jQuery('.ls-saving-warning').text('Do not close this page when saving your layers!');jQuery('.ls-settings input, .ls-settings select').each(function(){jQuery(this).data('name',jQuery(this).attr('name'));jQuery(this).attr('name','layerslider-slides[properties]['+jQuery(this).attr('name')+']')});jQuery('#ls-layers .ls-layer-box').each(function(layer){jQuery(this).find('.ls-slide-options input, .ls-slide-options select').each(function(){jQuery(this).data('name',jQuery(this).attr('name'));jQuery(this).attr('name','layerslider-slides[layers]['+layer+'][properties]['+jQuery(this).attr('name')+']')});jQuery(this).find('.ls-sublayers > tr').each(function(sublayer){jQuery(this).find('input, select, textarea').each(function(){jQuery(this).data('name',jQuery(this).attr('name'));jQuery(this).attr('name','layerslider-slides[layers]['+layer+'][sublayers]['+sublayer+']['+jQuery(this).attr('name')+']')})})});jQuery('.ls-callback-page textarea').each(function(){jQuery(this).data('name',jQuery(this).attr('name'));jQuery(this).attr('name','layerslider-slides[properties]['+jQuery(this).attr('name')+']')});LayerSlider.counter=0;setTimeout(function(){jQuery('#ls-layers .ls-layer-box').each(function(layer){jQuery(this).find('input[name="layerkey"]').val(layer);$data=jQuery('#ls-layers .ls-layer-box').eq(layer).find('input, textarea, select');$data=$data.add(jQuery('#ls-slider-form > input'));$data=$data.add(jQuery('.ls-settings').find('input, textarea, select'));$data=$data.add(jQuery('.ls-callback-page textarea'));jQuery.ajax(jQuery(el).attr('action'),{type:'POST',data:$data.serialize(),async:false,success:function(id){LayerSlider.counter+=1;if(jQuery('#ls-layers .ls-layer-box').length==LayerSlider.counter){jQuery('.ls-publish button').text('Saved').removeClass('saving').addClass('saved');jQuery('.ls-saving-warning').text('');setTimeout(function(){jQuery('.ls-publish button').text('Save changes').attr('disabled',false).removeClass('saved')},2e3);jQuery('.ls-settings input, .ls-settings select').each(function(){jQuery(this).attr('name',jQuery(this).data('name'))});jQuery('#ls-layers .ls-layer-box').each(function(layer){jQuery(this).find('.ls-slide-options input, .ls-slide-options select').each(function(){jQuery(this).attr('name',jQuery(this).data('name'))});jQuery(this).find('.ls-sublayers > tr').each(function(sublayer){jQuery(this).find('input, select, textarea').each(function(){jQuery(this).attr('name',jQuery(this).data('name'))})})});jQuery('.ls-callback-page textarea').each(function(){jQuery(this).attr('name',jQuery(this).data('name'))});if(document.location.href.indexOf('add')!=-1)document.location.href=drupal_base_path+'admin/layerslider/edit?id='+id+''}}})})},500)},cloneFix:function(){jQuery('textarea').each(function(){jQuery(this).text(jQuery(this).val())});jQuery('select').each(function(){var index=jQuery(this).find('option:selected').index();jQuery(this).find('option').attr('selected',false);jQuery(this).find('option').eq(index).attr('selected',true)})}};jQuery(document).ready(function(){var drupal_base_path=Drupal.settings.basePath;if(document.location.href.indexOf('layerslider')!=-1&&document.location.href.indexOf('add')==-1&&document.location.href.indexOf('edit')==-1&&document.location.href.indexOf('skin-editor')==-1){jQuery('.ls-slider-list a.remove').click(function(e){e.preventDefault();if(confirm('Are you sure you want to remove this slider?'))document.location.href=jQuery(this).attr('href')})}else if(document.location.href.indexOf('skin-editor')!=-1){jQuery('select[name="skin"]').change(function(){document.location.href=drupal_base_path+'admin/layerslider/skin-editor?skin='+jQuery(this).children(':selected').val()});jQuery('#editor').keydown(function(e){var keyCode=e.keyCode||e.which;if(keyCode==9){e.preventDefault();var start=jQuery(this).get(0).selectionStart,end=jQuery(this).get(0).selectionEnd;jQuery(this).val(jQuery(this).val().substring(0,start)+"\t"+jQuery(this).val().substring(end));jQuery(this).get(0).selectionStart=jQuery(this).get(0).selectionEnd=start+1}})}else{jQuery('#ls-main-nav-bar a:not(.unselectable)').click(function(e){e.preventDefault();LayerSlider.selectMainTab(this)});jQuery(window).resize(function(){LayerSlider.willGeneratePreview(jQuery('.ls-box.active').index())});jQuery('#ls-main-nav-bar a.support').click(function(e){e.preventDefault();jQuery('#contextual-help-link').click()});jQuery('.ls-settings :checkbox').customCheckbox();jQuery(window).load(function(){LayerSlider.generatePreview(jQuery('.ls-box.active').index())});LayerSlider.openMediaLibrary();LayerSlider.insertUpload();jQuery('.ls-settings').find('input[name="width"], input[name="height", input[name="sublayercontainer"]').keyup(function(){LayerSlider.willGeneratePreview(jQuery('.ls-box.active').index())});jQuery('.ls-settings input[name="backgroundcolor"]').keyup(function(){LayerSlider.willGeneratePreview(jQuery('.ls-box.active').index())});jQuery('.ls-reset').live('click',function(){jQuery(this).prev().val('');LayerSlider.generatePreview(jQuery('.ls-box.active').index())});jQuery('.ls-settings input[name="yourlogostyle"]').keyup(function(){LayerSlider.willGeneratePreview(jQuery('.ls-box.active').index())});jQuery('#ls-add-layer').click(function(e){e.preventDefault();LayerSlider.addLayer()});jQuery('#ls-layer-tabs a:not(.unsortable)').live('click',function(e){e.preventDefault();LayerSlider.selectLayer(this)});jQuery('.ls-layer-options-thead a.duplicate').live('click',function(e){e.preventDefault();LayerSlider.duplicateLayer(this)});jQuery('.ls-add-sublayer').live('click',function(e){e.preventDefault();LayerSlider.addSublayer(this)});jQuery('#ls-layer-tabs a span').live('click',function(e){e.preventDefault();e.stopPropagation();LayerSlider.removeLayer(this)});jQuery('.ls-sublayers tr').live('click',function(){LayerSlider.selectSubLayer(this)});jQuery('.ls-sublayer-nav a:not(:last-child)').live('click',function(e){e.preventDefault();LayerSlider.selectSublayerPage(this)});jQuery('.ls-sublayer-nav a:last-child').live('click',function(e){e.preventDefault();LayerSlider.removeSublayer(this)});jQuery('.ls-sublayer-options button.duplicate').live('click',function(e){e.preventDefault();LayerSlider.duplicateSublayer(this)});jQuery('.ls-highlight input').live('click',function(e){e.stopPropagation();LayerSlider.highlightSublayer(this)});jQuery('.ls-sublayer-types > span').live('click',function(e){e.preventDefault();LayerSlider.didSelectMediaType(this)});jQuery('.ls-sublayer-basic select').each(function(){var index=jQuery(this).find('option:selected').index();LayerSlider.selectMediaType(jQuery(this).parent().find('.ls-sublayer-types > span').eq(index))});jQuery('.ls-sublayer-style input, .ls-sublayer-style select, .ls-sublayer-style textarea').live('keyup',function(){LayerSlider.willGeneratePreview(jQuery(this).closest('.ls-layer-box').index())});jQuery('.ls-sublayers input[name="wordwrap"]').click(function(){LayerSlider.generatePreview(jQuery(this).closest('.ls-layer-box').index())});jQuery('.ls-sublayers textarea[name="html"]').live('keyup',function(){LayerSlider.willGeneratePreview(jQuery(this).closest('.ls-layer-box').index())});LayerSlider.addSortables();LayerSlider.addDraggable();LayerSlider.addLayerSortables();jQuery('.ls-sublayer-options input[name="skip"]').live('click',function(){LayerSlider.skipSublayer(this)});jQuery('.ls-preview-button').live('click',function(e){e.preventDefault();LayerSlider.play(jQuery(this).closest('.ls-layer-box').index())});jQuery('.draggable > *').live('click',function(){LayerSlider.selectDragElement(this)});jQuery('#ls-slider-form').submit(function(e){e.preventDefault();LayerSlider.save(this)});LayerSlider.setCallbackBoxesWidth();jQuery(window).resize(function(){LayerSlider.setCallbackBoxesWidth()});jQuery('.ls-colorpicker').each(function(){jQuery(this).farbtastic(function(color){jQuery('.color').val(color);jQuery('.color').css('background-color',color);LayerSlider.willGeneratePreview(jQuery('.ls-box.active').index())}).hide()});jQuery('.color').focus(function(){jQuery(this).next().slideDown()});jQuery('.color').blur(function(){jQuery(this).next().slideUp()})}})})})(jQuery);;
/* Source and licensing information for the above line(s) can be found at http://www.tapanalytics.com/sites/all/modules/tabvn/layer_slider/js/admin.js. */
(function($){Drupal.behaviors.devel={attach:function(context,settings){$(".krumo-footnote .krumo-call").once().before('<img style="vertical-align: middle;" title="Click to expand. Double-click to show path." src="'+settings.basePath+'misc/help.png"/>');var krumo_name=[];var krumo_type=[];function krumo_traverse(el){krumo_name.push($(el).html());krumo_type.push($(el).siblings("em").html().match(/\w*/)[0]);if($(el).closest(".krumo-nest").length>0)krumo_traverse($(el).closest(".krumo-nest").prev().find(".krumo-name"))}
$(".krumo-child > div:first-child",context).dblclick(function(e){if($(this).find("> .krumo-php-path").length>0)$(this).find("> .krumo-php-path").remove();else{krumo_traverse($(this).find("> a.krumo-name"));var krumo_path_string="";for(var i=krumo_name.length-1;i>=0;--i){if(krumo_name.length-1==i)krumo_path_string+="$"+krumo_name[i];if(typeof krumo_name[i-1]!=="undefined"){if(krumo_type[i]=="Array"){krumo_path_string+="[";if(!/^\d*$/.test(krumo_name[i-1]))krumo_path_string+="'";krumo_path_string+=
krumo_name[i-1];if(!/^\d*$/.test(krumo_name[i-1]))krumo_path_string+="'";krumo_path_string+="]"}if(krumo_type[i]=="Object")krumo_path_string+="->"+krumo_name[i-1]}}$(this).append('<div class="krumo-php-path" style="font-family: Courier, monospace; font-weight: bold;">'+krumo_path_string+"</div>");krumo_name=[];krumo_type=[]}})}}})(jQuery);;/**/
